// TODO: implement structured errors, with nice error codes